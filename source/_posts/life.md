---
title: life
date: 2016-03-02 22:14:58
tags: life ,MT
---

## 2016-03-02 新年初始踩到的坑

年初到现在一共工作12天，却觉得过了好久好久，特别精彩与长记性的感觉

### refer组件添加多次自动填充
这事说大不大，说小不小，关键是在符合现有的条件来来实现，即最好不要造轮子。

refer引用了typeahead.js来做自动填充。但是多次自动填充的话就会有很多问题，但是在强烈要求不要造轮子的情况下，通过查看typeahead.js的api也找到相应的解决方案。

当时的难点在：

	* 是否可添加新的选项
	* 如可添加新的选项，如果配置添加的接口与返回信息
	* 点击选项后取值并清空当前的input

解决方案是做个基类，所有的可控项可配置，并将callback事件进行可配置，以应对修改其他信息。

* 个人总结
	* 做组件要有很多情况的考虑，但是不要过多
	* 方法不可写的太死，要可配置
	* 尽可能地不去造轮子（虽然是前端的通病）！不造轮子！不造轮子

### api检索问题
我戏说是一个or引用的惨案，虽然内心很纠结与难过。但是这次的原因主要在于自己对mysql掌握的不足以及太懒的跑测试造成的

	select * from table where id = 100 or id = 101;
	select * from table where id in (100, 101)
	
如果可以用in尽量不要用or，首先是in在检索速度要比or快，另一方面在检查不中的情况下出来的结果可能是下面这样： （我就是这么作死的 ~~）

	select * from table where 100 or 101;
	
不要问为什么会成这样！有一方面没有考虑到就会这样！测试用例没有修改，或者是用户端数据传输的不对就会这样！

* 个人总结
	* 多读，多看看别人怎么写的
	* 多实践，实践出真知！
	* 一定要用心写测试，提交之前跑全部测试


### 功能回退
在refer完成多次自动填充功能的情况下，决定正行现有情况的改造，在邀请和通知功能上进行实践，然后各种点点点，各种修改，两三天下完成了。也就是今天准备上线，然后产品觉得不行了。。。。。在沟通好久的情况下，我毅然决然的选择了回退，这时候脑子里默默的想起了锋哥说过的：做的不好还为什么要上线

做的不好是什么概念？

第一： 没有还原原来的功能，上线被吐槽，为什么之前的功能没有了

第二： 没有完全完成预期的功能，还引进了bug。

第三： 交互不够流畅不够快，给用户体验就是卡或者挫的感觉

但是这三项我全占了。虽然实现看起来比较炫的功能。预期在完成其他辅助的功能之后再上一个相对来说完美一版。

* 个人总结
	* 多跟产品沟通下某项功能，全面了解用户需求
	* 多让吐槽龙code review，听吐槽龙吐槽代码特别长姿势
	* 不要一次把功能修改的特别大，步子大了容易裂裆

### 今天的我
其实下午的时候是特别郁闷的，三个比较大的功能虽然都是基于一个上做的实现，但是中间都有好多问题，连续挺吐槽龙吐槽了好久我的代码，然后下午发现有段代码有问题，准备删掉的时候被张弛发现了，接着吐槽了。。。
然后说说代码上我的问题

	* 命名。变量命名是被吐槽龙吐槽最多的，找合适的名字很难，尤其是在写业务的时候有时候会假死
	* 正则。 有时候可以用逻辑来完成的事情，一行正则也就搞定了。
	* 马虎不仔细。
	* 想的太少，没有考虑到api可测试的所有情况。
	* 沟通少。
	* 不够淡定，有时候脱离当时的心情看问题就一下子看出问题了。
	* 多线程，其实有时候多个任务并行的时候并不能很快很有效的切换。

回来路上想了很多出在自己身上的问题，而且好多是当时心情影响的，导致自己的暴躁，然后问题就越来越多，控制情绪，减少线程。